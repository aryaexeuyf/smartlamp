<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Smart Lamp Outdoor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:Arial;
  background:#0f172a;
  color:white;
  text-align:center;
}
button{
  padding:15px 40px;
  margin:10px;
  border:none;
  border-radius:30px;
  font-size:18px;
  cursor:pointer;
  transition:0.3s;
}
.on{background:#16a34a;}
.off{background:#dc2626;}
.card{
  margin-top:100px;
}
.watermark{
  position:fixed;
  bottom:10px;
  width:100%;
  font-size:12px;
  opacity:0.6;
}
</style>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>

<div class="card">
<h2>Smart Lamp Outdoor</h2>
<p id="status">Checking connection...</p>
<button class="on" onclick="setLamp(true)">ON</button>
<button class="off" onclick="setLamp(false)">OFF</button>
</div>

<div class="watermark">Project by AryaProject</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCfRXQKtfSQemzyESufRa-8MGNd_Pi2EeE",
  authDomain: "lampu-pju-njati.firebaseapp.com",
  databaseURL: "https://lampu-pju-njati-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "lampu-pju-njati"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

function setLamp(state){
  set(ref(db,'/PJU/state'), state);
}

onValue(ref(db,'/PJU/state'), (snapshot)=>{
  if(snapshot.exists()){
    document.getElementById("status").innerText =
      snapshot.val() ? "Lamp ON (Online)" : "Lamp OFF (Online)";
  }
});
</script>

</body>
</html>
